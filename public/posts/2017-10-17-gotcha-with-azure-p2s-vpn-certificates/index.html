<!doctype html>
<html lang="en-us">
  <head>
    <title>Gotcha when importing client certificates for Azure P2S VPN // Chris Neales Blog</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.105.0">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://www.chrisneale.org/css/main.min.0fb49e70a30412f97ddfc418e18fefef1d9fcdebe45f634dbbba768b00fe1eec.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Gotcha when importing client certificates for Azure P2S VPN"/>
<meta name="twitter:description" content="So the simple solution is that:
When importing a VPN Client Cert and you are presented with the option to &ldquo;Enable strong private key protection&rdquo;, untick it. If you&rsquo;re on a newer OS, you won&rsquo;t get this prompt (tested on Server 2016). Now this is in the troubleshooting guide, but it should be in the instructions, rather than something you have to search for after the fact. https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-troubleshoot-vpn-point-to-site-connection-problems
So RTFM, and also any related KBs&hellip;."/>

    <meta property="og:title" content="Gotcha when importing client certificates for Azure P2S VPN" />
<meta property="og:description" content="So the simple solution is that:
When importing a VPN Client Cert and you are presented with the option to &ldquo;Enable strong private key protection&rdquo;, untick it. If you&rsquo;re on a newer OS, you won&rsquo;t get this prompt (tested on Server 2016). Now this is in the troubleshooting guide, but it should be in the instructions, rather than something you have to search for after the fact. https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-troubleshoot-vpn-point-to-site-connection-problems
So RTFM, and also any related KBs&hellip;." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.chrisneale.org/posts/2017-10-17-gotcha-with-azure-p2s-vpn-certificates/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-10-17T22:00:00+00:00" />
<meta property="article:modified_time" content="2017-10-17T22:00:00+00:00" />



  </head>
  <body>
    <header class="app-header">
      <a href="https://www.chrisneale.org/"><img class="app-header-avatar" src="/avatar.jpg" alt="John Doe" /></a>
      <span class="app-header-title">Chris Neales Blog</span>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc vehicula turpis sit amet elit pretium.</p>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Gotcha when importing client certificates for Azure P2S VPN</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Oct 17, 2017
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          1 min read
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>
</svg>
              <a class="tag" href="https://www.chrisneale.org/tags/powershell/">PowerShell</a>
              <a class="tag" href="https://www.chrisneale.org/tags/security/">Security</a>
              <a class="tag" href="https://www.chrisneale.org/tags/scripting/">Scripting</a>
              <a class="tag" href="https://www.chrisneale.org/tags/azure/">Azure</a>
              <a class="tag" href="https://www.chrisneale.org/tags/p2svpn/">P2SVPN</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <!-- raw HTML omitted -->
<p>So the simple solution is that:<br>
When importing a VPN Client Cert and you are presented with the option to <em>&ldquo;Enable strong private key protection&rdquo;</em>, untick it.  If you&rsquo;re on a newer OS, you won&rsquo;t get this prompt (tested on Server 2016).  Now this is in the troubleshooting guide, but it should be in the instructions, rather than something you have to search for after the fact.
<a href="https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-troubleshoot-vpn-point-to-site-connection-problems">https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-troubleshoot-vpn-point-to-site-connection-problems</a></p>
<p>So RTFM, and also any related KBs&hellip;.and the TroubleShooting guide&hellip;.and you&rsquo;ll be fine</p>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
