<!doctype html><html lang=en-us><head><title>UCS Manager Security Hardening (or not) in a vBlock // Chris Neales Blog</title><link rel="shortcut icon" href=/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.105.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="John Doe"><meta name=description content><link rel=stylesheet href=https://www.chrisneale.org/css/main.min.0fb49e70a30412f97ddfc418e18fefef1d9fcdebe45f634dbbba768b00fe1eec.css><meta name=twitter:card content="summary"><meta name=twitter:title content="UCS Manager Security Hardening (or not) in a vBlock"><meta name=twitter:description content="Another of the outputs of our recent penetration test was an issue with Weak Ciphers in both the IPMI service on C200 Rack servers and B220 M3 blades and the CIMC https server of the C200&rsquo;s
Ok so can we fix it?
Well the answer isn&rsquo;t a black/white yes or no.
We are running the above UCS servers in 2 vBlocks. The first is a vBlock 100 the second is a vBlock 300."><meta property="og:title" content="UCS Manager Security Hardening (or not) in a vBlock"><meta property="og:description" content="Another of the outputs of our recent penetration test was an issue with Weak Ciphers in both the IPMI service on C200 Rack servers and B220 M3 blades and the CIMC https server of the C200&rsquo;s
Ok so can we fix it?
Well the answer isn&rsquo;t a black/white yes or no.
We are running the above UCS servers in 2 vBlocks. The first is a vBlock 100 the second is a vBlock 300."><meta property="og:type" content="article"><meta property="og:url" content="https://www.chrisneale.org/posts/2014-07-28-ucs-manager-security-hardening-or-not-in-a-vblock/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-07-28T18:00:00+00:00"><meta property="article:modified_time" content="2014-07-28T18:00:00+00:00"></head><body><header class=app-header><a href=https://www.chrisneale.org/><img class=app-header-avatar src=/avatar.jpg alt="John Doe"></a>
<span class=app-header-title>Chris Neales Blog</span><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc vehicula turpis sit amet elit pretium.</p></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>UCS Manager Security Hardening (or not) in a vBlock</h1><div class=post-meta><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Jul 28, 2014</div><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>2 min read</div><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg><a class=tag href=https://www.chrisneale.org/tags/cimc/>CIMC</a>
<a class=tag href=https://www.chrisneale.org/tags/ipmi/>IPMI</a>
<a class=tag href=https://www.chrisneale.org/tags/ucs/>UCS</a></div></div></header><div class=post-content><p>Another of the outputs of our recent penetration test was an issue with Weak Ciphers in both the IPMI service on C200 Rack servers and B220 M3 blades and the CIMC https server of the C200&rsquo;s</p><p>Ok so can we fix it?</p><p>Well the answer isn&rsquo;t a black/white yes or no.</p><p>We are running the above UCS servers in 2 vBlocks.  The first is a vBlock 100 the second is a vBlock 300.</p><p>To keep consistent with the VCE Certification Matrix we have to stick to approved versions of firmware, ESXi OSes etc.  This means that the fix isn&rsquo;t &ldquo;Just go to Cisco&rsquo;s site and get the latest everything and install it&rdquo;.</p><p> </p><p>So we decided as we weren&rsquo;t using IPMI over Lan to disable that.  One the Rack servers this wasn&rsquo;t a problem.  Simply connect to the CIMC webpage and login.  Then go to Communications Services and untick IPMI over Lan.</p><p>Problem solved&mldr;&mldr;but wait the Blades don&rsquo;t have the same style CIMC, it&rsquo;s managed and configured via service profiles in UCS Manager.  A quick search tells you that if you are running UCS 2.2 then choose to restrict IPMI access</p><p><a href=http://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/sw/gui/config/guide/2-2/b_UCSM_GUI_Configuration_Guide_2_2/b_UCSM_GUI_Configuration_Guide_2_2_chapter_011110.html#concept_C6A0C24AE90D4AE6BC0D29FDC17DFECD><a href=http://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/sw/gui/config/guide/2-2/b_UCSM_GUI_Configuration_Guide_2_2/b_UCSM_GUI_Configuration_Guide_2_2_chapter_011110.html#concept_C6A0C24AE90D4AE6BC0D29FDC17DFECD>http://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/sw/gui/config/guide/2-2/b_UCSM_GUI_Configuration_Guide_2_2/b_UCSM_GUI_Configuration_Guide_2_2_chapter_011110.html#concept_C6A0C24AE90D4AE6BC0D29FDC17DFECD</a></a></p><p>Great stuff, but wait I can&rsquo;t see those options in my GUI (or the equivalent commands in the CLI)&mldr;&mldr;&mldr;&mldr;&mldr;..checks UCS version&mldr;&mldr;&mldr;&mldr;&mldr;..ahh erm 2.1.3b&mldr;&mldr;&mldr;&mldr;&mldr;..which is what the supported Matrix version is.</p><p><a href=http://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/sw/gui/config/guide/2-1/b_UCSM_GUI_Configuration_Guide_2_1/b_UCSM_GUI_Configuration_Guide_2_1_chapter_011110.html#d184278e3464a1635><a href=http://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/sw/gui/config/guide/2-1/b_UCSM_GUI_Configuration_Guide_2_1/b_UCSM_GUI_Configuration_Guide_2_1_chapter_011110.html#d184278e3464a1635>http://www.cisco.com/c/en/us/td/docs/unified_computing/ucs/sw/gui/config/guide/2-1/b_UCSM_GUI_Configuration_Guide_2_1/b_UCSM_GUI_Configuration_Guide_2_1_chapter_011110.html#d184278e3464a1635</a></a></p><p>So now I&rsquo;m stuck on a version that has a vulnerability and no resolution available to me because I am bound by the supported config and, even though mine isn&rsquo;t the latest supported config, the latest doesn&rsquo;t support 2.2 yet either.</p><p>Fortunately we were able to mitigate the issue via other means due to the location behind firewalls of the particular vulnerability.</p><p>But this still means</p><p><strong>&ldquo;Caveat Emptor&rdquo;  </strong></p><p>It&rsquo;s great buying into a vendor who promises to do all the legwork in compatibility testing to provide you with matrices of the component versions which will work together&mldr;&mldr;..unless they are on top of their game&mldr;&mldr;&mldr;they keep you off yours!</p></div><div class=post-footer></div></article></main></body></html>