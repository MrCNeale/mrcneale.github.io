<!doctype html><html lang=en-us><head><title>Allowing automated installs of newer VMtools than the host version (Caveat for Trend Deep Security) // Chris Neales Blog</title><link rel="shortcut icon" href=/favicon.ico><meta charset=utf-8><meta name=generator content="Hugo 0.105.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="John Doe"><meta name=description content><link rel=stylesheet href=https://www.chrisneale.org/css/main.min.0fb49e70a30412f97ddfc418e18fefef1d9fcdebe45f634dbbba768b00fe1eec.css><meta name=twitter:card content="summary"><meta name=twitter:title content="Allowing automated installs of newer VMtools than the host version (Caveat for Trend Deep Security)"><meta name=twitter:description content="During a recent patching cycle VMtools across a set of VMs were updated to the latest version. This was to patch security vulnerabilities in the versions which were running to ensure the environment was as secure as possible for a PenTest which would go towards IL3 Accreditation.
Shavlik was good enough to oblige here and went out and patched lots of VMs with new VMtools automatically to the latest version."><meta property="og:title" content="Allowing automated installs of newer VMtools than the host version (Caveat for Trend Deep Security)"><meta property="og:description" content="During a recent patching cycle VMtools across a set of VMs were updated to the latest version. This was to patch security vulnerabilities in the versions which were running to ensure the environment was as secure as possible for a PenTest which would go towards IL3 Accreditation.
Shavlik was good enough to oblige here and went out and patched lots of VMs with new VMtools automatically to the latest version."><meta property="og:type" content="article"><meta property="og:url" content="https://www.chrisneale.org/posts/2014-06-12-allowing-automated-installs-of-newer-vmtools-than-the-host-version-caveat-for-trend-deep-security/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-06-12T00:00:00+00:00"><meta property="article:modified_time" content="2014-06-12T00:00:00+00:00"></head><body><header class=app-header><a href=https://www.chrisneale.org/><img class=app-header-avatar src=/avatar.jpg alt="John Doe"></a>
<span class=app-header-title>Chris Neales Blog</span><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc vehicula turpis sit amet elit pretium.</p></header><main class=app-container><article class=post><header class=post-header><h1 class=post-title>Allowing automated installs of newer VMtools than the host version (Caveat for Trend Deep Security)</h1><div class=post-meta><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>Jun 12, 2014</div><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>2 min read</div></div></header><div class=post-content><p>During a recent patching cycle VMtools across a set of VMs were updated to the latest version.  This was to patch security vulnerabilities in the versions which were running to ensure the environment was as secure as possible for a PenTest which would go towards IL3 Accreditation.</p><p>Shavlik was good enough to oblige here and went out and patched lots of VMs with new VMtools automatically to the latest version.</p><p>Then an issue occurred with Trend Deep Security.</p><p>Normally when doing a VMtools install for a VM managed by trend the following should be considered as per the Trend Deep Security Best Practices PDF</p><p>=============================</p><p>VMware includes the VMware vShield Endpoint Driver in VMware Tools 5.x, but the installation program</p><p>does not install it on Guest VMs by default. To install it on guest VM, review the installation options in the</p><p>Shavlik didn&rsquo;t consider that I wanted a Custom/Complete install and so VMCI was missing.</p><p>Ok, that would be fine but now we have VMs with newer VMtools than the ISO which is stored on the ESXi Host. So we can&rsquo;t just re-run the install/upgrade via vSphere</p><p>That&rsquo;s where Andreas Peetz over at <a href=http://www.v-front.de>http://www.v-front.de</a> comes in with his blog post about how to effectively do 2 things</p><ol><li><p>Place the newer VMtools iso onto a shared datstore</p></li><li><p>Tell the ESXi host to look at the new location when it does VMtools installs/upgrades</p></li></ol><p>Now you can do automated installs/upgrades via the gui (powercli cannot pass through the custom parameters)</p><p>Here is Andreas&rsquo; Blog Post <a href=http://www.v-front.de/2013/01/how-to-use-latest-vmware-tools-with.html>http://www.v-front.de/2013/01/how-to-use-latest-vmware-tools-with.html</a></p><p> </p></div><div class=post-footer></div></article></main></body></html>